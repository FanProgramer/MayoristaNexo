<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mayorista NexoTech</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    /* Puedes mover esto a style.css si prefer√≠s */
    .contenedor {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      padding: 20px;
    }

    .producto {
      border: 1px solid #ccc;
      padding: 15px;
      border-radius: 10px;
      background-color: #fff;
      width: 250px;
      text-align: center;
    }

    .producto img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .btn {
      background-color: #28a745;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .btn:hover {
      background-color: #218838;
    }

    #modalPedido {
      display: none; /* Oculto por defecto */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }

    .contenidoModal {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
    }
  </style>
</head>
<body>

<header>
  <a href="#top"><img src="img/logo.png" alt="Mi Logo" /></a>
  <p class="leyenda-compra-minima">üõçÔ∏è Compra m√≠nima $250.000</p>
  <p>Usl: <span id="onlineCount">0</span></p>
</header>
  
<input type="text" id="buscador" placeholder="Buscar producto..." oninput="filtrarProductos()" />

<div class="contenedor" id="lista-productos">

  

  <div class="producto" data-stock="5">
    <img src="img/20WIPHOB.jpg" alt="Cable Iphone" />
    <h2>Cargadores Iphone</h2>
    <p>35W TC y cable lightning a TC con pata</p>
    <p>Precio: $5,732</p>
    <p>Stock disponible: <span class="stock">100</span></p>
    Cantidad:
    <input type="number" id="cantidad1" min="1" max="5" value="1" style="width: 60px" />
    <button class="btn" onclick="agregarAlCarrito('Cable Iphone 20WIPHOB', 5732, 'cantidad1', 100)">Agregar al carrito</button>
     <button class="ver-pedido-btn">üõí Ver Pedido</button> <!-- BOT√ìN NUEVO -->
  </div>

  <div class="producto" data-stock="5">
    <img src="IMG/HDMIDISPLAY.jpg" alt="Adaptadores" />
    <h2>Adaptadores</h2>
    <p>Adaptador HDMI a DisplayPort</p>
    <p>Precio: $4,080</p>
    <p>Stock disponible: <span class="stock">100</span></p>
    Cantidad:
    <input type="number" id="cantidad2" min="1" max="5" value="1" style="width: 60px" />
    <button class="btn" onclick="agregarAlCarrito('Adaptador HDMI/Display HDMIDISPLAY', 4080, 'cantidad2', 100)">Agregar al carrito</button>
     <button class="ver-pedido-btn">üõí Ver Pedido</button> <!-- BOT√ìN NUEVO -->
  </div>

  productos .... 
  </div>

  <h2>Balanza Comercial de 40Kg</h2>
  <p>Balanza Comercial 40kg CFN</p>
  <p>Precio: $40,000</p>
  <p>Stock disponible: <span class="stock">100</span></p>
  
  Cantidad:
  <input type="number" id="cantidad40" min="1" max="5" value="1" style="width: 60px" />
  <button class="btn" onclick="agregarAlCarrito('Balanza Comercial 40kg CFN', 40000, 'cantidad40', 100)">Agregar al carrito</button>
  <button class="ver-pedido-btn">üõí Ver Pedido</button>
  </div>

  <div class="producto" data-stock="5">
    <img src="IMG/MH-500.jpg" alt="Balanza de 500gr" />
    <h2>Balanza de 500gr</h2>
    <p>Balanza de 500gr MH-500</p>
    <p>Precio: $7,620</p>
    <p>Stock disponible: <span class="stock">100</span></p>
    Cantidad:
    <input type="number" id="cantidad41" min="1" max="5" value="1" style="width: 60px" />
    <button class="btn" onclick="agregarAlCarrito('Balanza 500gr MH-500', 7620, 'cantidad41', 100)">Agregar al carrito</button>
     <button class="ver-pedido-btn">üõí Ver Pedido</button> <!-- BOT√ìN NUEVO -->
  </div>

  <div class="producto" data-stock="5">
    <img src="IMG/SV-10.jpg" alt="Balanza de cocina 10Kg" />
    <h2>Balanza de Cocina 10Kg</h2>
    <p>Balanza de Cocina 10Kg SV-10</p>
    <p>Precio: $7,620</p>
    <p>Stock disponible: <span class="stock">100</span></p>
    Cantidad:
    <input type="number" id="cantidad42" min="1" max="5" value="1" style="width: 60px" />
    <button class="btn" onclick="agregarAlCarrito('Balanza de cocina 10Kg SV-10', 7620, 'cantidad42', 100)">Agregar al carrito</button>
     <button class="ver-pedido-btn">üõí Ver Pedido</button> <!-- BOT√ìN NUEVO -->
  </div>

  <div class="producto" data-stock="5">
    <img src="IMG/AF24010.jpg" alt="Balanza personal con aplicaci√≥n" />
    <h2>Balanzza personal con aplicaci√≥n</h2>
    <p>Balanza personal con app hasta 180Kg AF24010</p>
    <p>Precio: $12,610</p>
    <p>Stock disponible: <span class="stock">100</span></p>
    Cantidad:
    <input type="number" id="cantidad43" min="1" max="5" value="1" style="width: 60px" />
    <button class="btn" onclick="agregarAlCarrito('Balanza personal con app hasta 180Kg AF24010', 12610, 'cantidad43', 100)">Agregar al carrito</button>
     <button class="ver-pedido-btn">üõí Ver Pedido</button> <!-- BOT√ìN NUEVO -->
  </div>

  <div class="producto" data-stock="5">
    <img src="IMG/BATPACK.jpg" alt="Cargador portatil power" />
    <h2>Cargador port√°til power</h2>
    <p>Cargador poratil power BATPACK</p>
    <p>Precio: $14,400</p>
    <p>Stock disponible: <span class="stock">100</span></p>
    Cantidad:
    <input type="number" id="cantidad44" min="1" max="5" value="1" style="width: 60px" />
    <button class="btn" onclick="agregarAlCarrito('Cargador port√°til power BATPACK', 14400, 'cantidad44', 100)">Agregar al carrito</button>
     <button class="ver-pedido-btn">üõí Ver Pedido</button> <!-- BOT√ìN NUEVO -->
  </div>

  <div class="producto" data-stock="5">
    <img src="IMG/LEDMAGIC.jpg" alt="Bola Boliche" />
    <h2>Bola Boliche</h2>
    <p>Bola Boliche LEDMAGIC fiesta</p>
    <p>Precio: $7,984</p>
    <p>Stock disponible: <span class="stock">100</span></p>
    Cantidad:
    <input type="number" id="cantidad45" min="1" max="5" value="1" style="width: 60px" />
    <button class="btn" onclick="agregarAlCarrito('Bola boliche LEDMAGIC fiesta', 7984, 'cantidad45', 100)">Agregar al carrito</button>
     <button class="ver-pedido-btn">üõí Ver Pedido</button> <!-- BOT√ìN NUEVO -->
  </div>
  
</div>

  <div id="paginacion"></div>

<div style="text-align: center; margin-top: 20px;">
  <button class="btn" onclick="mostrarPedido()">Ver pedido</button>
  <button class="btn" onclick="enviarPorWhatsapp()">Enviar pedido por WhatsApp</button>
</div>

<!-- Modal pedido -->
<div id="modalPedido">
  <div class="contenidoModal">
    <h2>Detalle del pedido</h2>
    <ul id="listaDetallePedido"></ul>
    <p>Total: $<span id="totalPedido">0</span></p>
    <button class="btn" onclick="cerrarPedido()">Cerrar</button>
    <button class="btn" onclick="enviarPorWhatsapp()">Confirmar y enviar pedido</button>
  </div>
</div>


  
<script>
  // Carrusel simple para todos los productos
  document.querySelectorAll('.carousel').forEach((carousel) => {
    const images = carousel.querySelectorAll('.carousel-image');
    let current = 0;

    setInterval(() => {
      images[current].classList.remove('active');
      current = (current + 1) % images.length;
      images[current].classList.add('active');
    }, 5000); // 5 segundos
  });
</script>


<div><span id="onlineCount"></span></div>

<script type="module">
  // Importaciones de Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
  import { getDatabase, ref, set, onDisconnect, onValue } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

  // Configuraci√≥n de Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCRW8nwRP-s8VgxurPtBUOiIvjqhK80rRs",
    authDomain: "contador-usuarios-24998.firebaseapp.com",
    databaseURL: "https://contador-usuarios-24998-default-rtdb.firebaseio.com",
    projectId: "contador-usuarios-24998",
    storageBucket: "contador-usuarios-24998.appspot.com",
    messagingSenderId: "192544535798",
    appId: "1:192544535798:web:1a30a552ee958274a828d7"
  };

  // Inicializar Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getDatabase(app);

  // Autenticaci√≥n an√≥nima
  signInAnonymously(auth)
    .then(() => {
      console.log("Sesi√≥n an√≥nima iniciada");
    })
    .catch((error) => {
      console.error("Error al autenticar:", error);
    });

  // Cuando el usuario est√© autenticado
  onAuthStateChanged(auth, (user) => {
    if (user) {
      const uid = user.uid;
      const userRef = ref(db, onlineUsers/${uid});
      set(userRef, true);
      onDisconnect(userRef).remove();

      // Escuchar cambios en la cantidad de usuarios conectados
      const onlineUsersRef = ref(db, "onlineUsers");
      onValue(onlineUsersRef, (snapshot) => {
        const count = snapshot.exists() ? Object.keys(snapshot.val()).length : 0;
        document.getElementById("onlineCount").textContent = count;
      });
    }
  });
  <script>
  const productosPorPagina = 30;

  // üëâ Obtener el n√∫mero de p√°gina desde la URL
  function obtenerPaginaActual() {
    const params = new URLSearchParams(window.location.search);
    return parseInt(params.get('pagina')) || 1;
  }

  function mostrarProductos(pagina) {
    const todosLosProductos = document.querySelectorAll('.producto');
    const totalPaginas = Math.ceil(todosLosProductos.length / productosPorPagina);

    todosLosProductos.forEach((producto, index) => {
      producto.style.display = (index >= (pagina - 1) * productosPorPagina && index < pagina * productosPorPagina) ? 'block' : 'none';
    });

    const paginacionDiv = document.getElementById('paginacion');
    paginacionDiv.innerHTML = '';

    for (let i = 1; i <= totalPaginas; i++) {
      const link = document.createElement('a');
      link.innerText = i;
      link.href = ?pagina=${i};
      link.classList.add('boton-pagina');
      if (i === pagina) link.classList.add('activo');
      paginacionDiv.appendChild(link);
    }
  }

  // üëâ Ejecutar al cargar la p√°gina
  window.onload = function() {
    const pagina = obtenerPaginaActual();
    mostrarProductos(pagina);
  };
</script>


  
<script src="js/app.js"></script>
</body>
</html>
